/*
	Copyright (c) 2004-2009, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/


window[(typeof (djConfig)!="undefined"&&djConfig.scopeMap&&djConfig.scopeMap[0][1])||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","dijit.Dialog"],["require","dojo.dnd.move"],["require","dojo.dnd.TimedMoveable"],["require","dojo.fx"],["require","dijit._Widget"],["require","dijit._Templated"],["require","dijit.form._FormMixin"],["require","dijit._DialogMixin"],["require","dijit.DialogUnderlay"],["require","dijit.layout.ContentPane"],["requireLocalization","dijit","common",null,"ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw","ROOT,ar,ca,cs,da,de,el,es,fi,fr,he,hu,it,ja,ko,nb,nl,pl,pt,pt-pt,ru,sk,sl,sv,th,tr,zh,zh-tw"],["require","dijit.TooltipDialog"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["dijit.Dialog"]){_4._hasResource["dijit.Dialog"]=true;_4.provide("dijit.Dialog");_4.require("dojo.dnd.move");_4.require("dojo.dnd.TimedMoveable");_4.require("dojo.fx");_4.require("dijit._Widget");_4.require("dijit._Templated");_4.require("dijit.form._FormMixin");_4.require("dijit._DialogMixin");_4.require("dijit.DialogUnderlay");_4.require("dijit.layout.ContentPane");_4.declare("dijit._DialogBase",[_5._Templated,_5.form._FormMixin,_5._DialogMixin],{templateString:_4.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog\" tabindex=\"-1\" waiRole=\"dialog\" waiState=\"labelledby-${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"onclick: onCancel, onmouseenter: _onCloseEnter, onmouseleave: _onCloseLeave\" title=\"${buttonCancel}\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"),attributeMap:_4.delegate(_5._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:_5.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _7=_4.i18n.getLocalization("dijit","common");_4.mixin(this,_7);this.inherited(arguments);},postCreate:function(){_4.style(this.domNode,{display:"none",position:"absolute"});_4.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=_4.position(e.node);}},_setup:function(){var _8=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(_4.isIE==6)?new _4.dnd.TimedMoveable(_8,{handle:this.titleBar}):new _4.dnd.Moveable(_8,{handle:this.titleBar,timeout:0});_4.subscribe("/dnd/move/stop",this,"_endDrag");}else{_4.addClass(_8,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":_4.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};this._fadeIn=_4.fadeIn({node:_8,duration:this.duration,beforeBegin:_4.hitch(this,function(){var _9=_5._underlay;if(!_9){_9=_5._underlay=new _5.DialogUnderlay(this.underlayAttrs);}else{_9.attr(this.underlayAttrs);}var _a=948+_5._dialogStack.length*2;_4.style(_5._underlay.domNode,"zIndex",_a);_4.style(this.domNode,"zIndex",_a+1);_9.show();}),onEnd:_4.hitch(this,function(){if(this.autofocus){this._getFocusItems(this.domNode);_5.focus(this._firstFocusItem);}})});this._fadeOut=_4.fadeOut({node:_8,duration:this.duration,onEnd:_4.hitch(this,function(){_8.style.display="none";var ds=_5._dialogStack;if(ds.length==0){_5._underlay.hide();}else{_4.style(_5._underlay.domNode,"zIndex",948+ds.length*2);_5._underlay.attr(ds[ds.length-1].underlayAttrs);}if(this.refocus){var _b=this._savedFocus;if(ds.length>0){var pd=ds[ds.length-1];if(!_4.isDescendant(_b.node,pd.domNode)){pd._getFocusItems(pd.domNode);_b=pd._firstFocusItem;}}_5.focus(_b);}})});},uninitialize:function(){var _c=false;if(this._fadeIn&&this._fadeIn.status()=="playing"){_c=true;this._fadeIn.stop();}if(this._fadeOut&&this._fadeOut.status()=="playing"){_c=true;this._fadeOut.stop();}if((this.open||_c)&&!_5._underlay._destroyed){_5._underlay.hide();}if(this._moveable){this._moveable.destroy();}this.inherited(arguments);},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{_4.style(this.containerNode,{width:"auto",height:"auto"});}var mb=_4.marginBox(this.domNode);var _d=_5.getViewport();if(mb.w>=_d.w||mb.h>=_d.h){var w=Math.min(mb.w,Math.floor(_d.w*0.75)),h=Math.min(mb.h,Math.floor(_d.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{_4.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!_4.hasClass(_4.body(),"dojoMove")){var _e=this.domNode,_f=_5.getViewport(),p=this._relativePosition,bb=p?null:_4._getBorderBox(_e),l=Math.floor(_f.l+(p?p.x:(_f.w-bb.w)/2)),t=Math.floor(_f.t+(p?p.y:(_f.h-bb.h)/2));_4.style(_e,{left:l+"px",top:t+"px"});}},_onKey:function(evt){var ds=_5._dialogStack;if(ds[ds.length-1]!=this){return;}if(evt.charOrCode){var dk=_4.keys;var _10=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _11=(this._firstFocusItem==this._lastFocusItem);if(_10==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_11){_5.focus(this._lastFocusItem);}_4.stopEvent(evt);}else{if(_10==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_11){_5.focus(this._firstFocusItem);}_4.stopEvent(evt);}else{while(_10){if(_10==this.domNode||_4.hasClass(_10,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}_10=_10.parentNode;}if(evt.charOrCode!==dk.TAB){_4.stopEvent(evt);}else{if(!_4.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOut.status()=="playing"){this._fadeOut.stop();}this._modalconnects.push(_4.connect(window,"onscroll",this,"layout"));this._modalconnects.push(_4.connect(window,"onresize",this,function(){var _12=_5.getViewport();if(!this._oldViewport||_12.h!=this._oldViewport.h||_12.w!=this._oldViewport.w){this.layout();this._oldViewport=_12;}}));this._modalconnects.push(_4.connect(_4.doc.documentElement,"onkeypress",this,"_onKey"));_4.style(this.domNode,{opacity:0,display:""});this.open=true;this._onShow();this._size();this._position();_5._dialogStack.push(this);this._fadeIn.play();this._savedFocus=_5.getFocus(this);},hide:function(){var ds=_5._dialogStack;if(!this._alreadyInitialized||this!=ds[ds.length-1]){return;}if(this._fadeIn.status()=="playing"){this._fadeIn.stop();}ds.pop();this._fadeOut.play();if(this._scrollConnected){this._scrollConnected=false;}_4.forEach(this._modalconnects,_4.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this.open=false;this.onHide();},layout:function(){if(this.domNode.style.display!="none"){if(_5._underlay){_5._underlay.layout();}this._position();}},destroy:function(){_4.forEach(this._modalconnects,_4.disconnect);if(this.refocus&&this.open){setTimeout(_4.hitch(_5,"focus",this._savedFocus),25);}this.inherited(arguments);},_onCloseEnter:function(){_4.addClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");},_onCloseLeave:function(){_4.removeClass(this.closeButtonNode,"dijitDialogCloseIcon-hover");}});_4.declare("dijit.Dialog",[_5.layout.ContentPane,_5._DialogBase],{});_5._dialogStack=[];_4.require("dijit.TooltipDialog");}}};});